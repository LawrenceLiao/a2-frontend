{"ast":null,"code":"var _jsxFileName = \"/Users/lawrenceliao/Desktop/a2-frontend/src/components/Login/LoginForm/LoginForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Button, Grid, InputAdornment, TextField, Typography } from '@material-ui/core';\nimport { AccountCircle, LockRounded } from '@material-ui/icons';\nimport { Form, Formik, Field, ErrorMessage } from 'formik';\nimport { Link, useHistory } from 'react-router-dom';\nimport './LoginForm.scss';\nimport * as apiUtils from '../../../utils/apiUtils';\nimport WarningMessage from '../WarningMessage/WarningMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginForm = () => {\n  _s();\n\n  const history = useHistory();\n  const [warning, setWarning] = useState({\n    shown: false,\n    message: ''\n  });\n  const initialValues = {\n    email: '',\n    password: ''\n  };\n\n  const onSubmit = async ({\n    email,\n    password\n  }) => {\n    setWarning({\n      shown: false,\n      message: ''\n    });\n\n    try {\n      const loginResponse = await apiUtils.login({\n        email,\n        password\n      });\n\n      if (loginResponse.status === 200) {\n        localStorage.setItem('email', email);\n        localStorage.setItem('username', loginResponse.data.username);\n        localStorage.setItem('login', 'true');\n        history.push('/main');\n      }\n    } catch (error) {\n      if (error.response.status >= 500) {\n        setWarning({\n          shown: true,\n          message: \"INTERNAL_SERVER_ERROR\"\n        });\n      }\n\n      if (error.response.status >= 400 && error.response.status < 500) {\n        setWarning({\n          shown: true,\n          message: \"Email or Password is invalid\"\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login_form\",\n    children: /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: initialValues,\n      onSubmit: onSubmit,\n      children: ({\n        isSubmitting\n      }) => /*#__PURE__*/_jsxDEV(Form, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: warning.shown ? /*#__PURE__*/_jsxDEV(WarningMessage, {\n            content: warning.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 34\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          as: TextField,\n          label: \"Email\",\n          name: \"email\",\n          variant: \"outlined\",\n          margin: \"normal\",\n          fullWidth: true,\n          id: \"email\",\n          autoFocus: true,\n          autoComplete: \"email\",\n          helperText: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"email\",\n            children: msg => /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"errorMessage\",\n              children: msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 19\n          }, this),\n          InputProps: {\n            startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"start\",\n              children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 21\n            }, this)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          \"data-testid\": \"passwordInput\",\n          as: TextField,\n          label: \"Password\",\n          variant: \"outlined\",\n          margin: \"normal\",\n          fullWidth: true,\n          id: \"password\",\n          type: \"password\",\n          name: \"password\",\n          autoComplete: \"current-password\",\n          helperText: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"password\",\n            children: msg => /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"errorMessage\",\n              children: msg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 19\n          }, this),\n          InputProps: {\n            startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"start\",\n              children: /*#__PURE__*/_jsxDEV(LockRounded, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          style: {\n            backgroundColor: '#2ab782'\n          },\n          disabled: isSubmitting,\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"row\",\n          justify: \"space-between\",\n          alignItems: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              children: [\"New User? \\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n                id: \"signUpLink\",\n                className: \"link\",\n                to: \"/signup\",\n                children: \"Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 7\n  }, this);\n};\n\n_s(LoginForm, \"HTfLxjLpOWcLlusmHIkusCSulQg=\", false, function () {\n  return [useHistory];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["/Users/lawrenceliao/Desktop/a2-frontend/src/components/Login/LoginForm/LoginForm.jsx"],"names":["React","useState","Button","Grid","InputAdornment","TextField","Typography","AccountCircle","LockRounded","Form","Formik","Field","ErrorMessage","Link","useHistory","apiUtils","WarningMessage","LoginForm","history","warning","setWarning","shown","message","initialValues","email","password","onSubmit","loginResponse","login","status","localStorage","setItem","data","username","push","error","response","isSubmitting","msg","startAdornment","backgroundColor","height"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n    Button,\n    Grid,\n    InputAdornment,\n    TextField,\n    Typography,\n} from '@material-ui/core';\nimport { AccountCircle, LockRounded } from '@material-ui/icons';\nimport { Form, Formik, Field, ErrorMessage } from 'formik';\nimport {\n    Link,\n    useHistory,\n} from 'react-router-dom';\nimport './LoginForm.scss';\nimport * as apiUtils from '../../../utils/apiUtils';\nimport WarningMessage from '../WarningMessage/WarningMessage';\n\nconst LoginForm = () => {\n    const history = useHistory();\n    const [warning, setWarning] = useState({\n      shown: false,\n      message: '',\n    });\n  \n    const initialValues = {\n      email: '',\n      password: '',\n    };\n   \n    const onSubmit = async ({ email, password }) => {\n      setWarning({\n        shown: false,\n        message: '',\n      });\n      try {\n        const loginResponse = await apiUtils.login({ email, password });\n\n  \n        if (loginResponse.status === 200) {\n          localStorage.setItem('email', email);\n          localStorage.setItem('username', loginResponse.data.username);\n          localStorage.setItem('login', 'true');\n          history.push('/main');\n        }\n        \n      } catch (error) {\n        if (error.response.status >= 500) {\n          setWarning({\n            shown: true,\n            message: \"INTERNAL_SERVER_ERROR\",\n          });\n        }\n        if (error.response.status >= 400 && error.response.status < 500) {\n          setWarning({\n            shown: true,\n            message: \"Email or Password is invalid\",\n          });\n        }\n      }\n    };\n    return (\n      <div className=\"login_form\">\n        <Formik\n          initialValues={initialValues}\n          onSubmit={onSubmit}\n        >\n          {({ isSubmitting }) => (\n            <Form>\n              <div>\n                {warning.shown ? <WarningMessage content={warning.message} /> : null}\n              </div>\n              <div>\n              </div>\n              <Field\n                as={TextField}\n                label=\"Email\"\n                name=\"email\"\n                variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                id=\"email\"\n                autoFocus\n                autoComplete=\"email\"\n                helperText={(\n                  <ErrorMessage name=\"email\">\n                    { (msg) => <span className=\"errorMessage\">{msg}</span>}\n                  </ErrorMessage>\n                )}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <AccountCircle />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n              <Field\n                data-testid=\"passwordInput\"\n                as={TextField}\n                label=\"Password\"\n                variant=\"outlined\"\n                margin=\"normal\"\n                fullWidth\n                id=\"password\"\n                type=\"password\"\n                name=\"password\"\n                autoComplete=\"current-password\"\n                helperText={(\n                  <ErrorMessage name=\"password\">\n                    { (msg) => <span className=\"errorMessage\">{msg}</span>}\n                  </ErrorMessage>\n                )}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <LockRounded />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                style={{ backgroundColor: '#2ab782' }}\n                disabled={isSubmitting}\n              >\n                Sign in\n              </Button>\n              <div style={{ height: 10 }} />\n              <Grid container direction=\"row\" justify=\"space-between\" alignItems=\"center\">\n                <Grid item>\n                  <Typography>\n                    New User? &nbsp;\n                    <Link id=\"signUpLink\" className=\"link\" to=\"/signup\">\n                      Sign Up\n                    </Link>\n                  </Typography>\n                </Grid>\n              </Grid>\n            </Form>\n          )}\n        </Formik>\n      </div>\n    );\n  };\n  \n  export default LoginForm;"]},"metadata":{},"sourceType":"module"}